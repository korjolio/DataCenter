{% extends "WebApp/base.html" %}

{% block js %}

  <script>
    function EliminarPedido(id){
      Swal.fire({
        "title":"¿Estas seguro?",
        "text":"Esta acción no se puede deshacer",
        "icon":"question",
        "showCancelButton":true,
        "cancelButtonText":"No, cancelar",
        "confirmButtonText":"Si, eliminar",
        "reverseButtons":true,
        "confirmButtonColor":"#dc3545"
      })
      .then(function(result){
        if(result.isConfirmed){
          window.location.href = "/eliminar-pedido/"+id+"/"
        }
      })
    }
  </script>

{% endblock %}

{% load static %}

{% block content %}

<div style="width: 80%; font-family: 'Raleway' ; margin:auto; margin-top: 20px; margin-bottom: 20px;">
    <div class="jumbotron" style="padding: 2%;">
        <h2 class="display-5">Listado de Pedidos</h2>
        <hr class="my-4">
        <table class="table table-hover">
  <thead>
    <tr>
      <th scope="col">Tipo Plan</th>
      <th scope="col">Vigencia</th>
      <th scope="col">Dominio</th>
      <th scope="col">Certificado SSL</th>
      <th scope="col">Nombre</th>
      <th scope="col">Apellido Paterno</th>
      <th scope="col">Apellido Materno</th>
      <th scope="col">RUT</th>
      <th scope="col">Email</th>
      <th scope="col">Opciones</th>
    </tr>
  </thead>
  <tbody>
    {% for p in entity %}
    <tr>
      <td>{{ p.tipo_plan }}</td>
      <td>{{ p.vigencia }}</td>
      <td>{{ p.dominio }}</td>
      <td>
        {% if p.cert_ssl %}
        Si
        {% else %}
        No
        {% endif %}
      </td>
      <td>{{ p.nombre }}</td>
      <td>{{ p.a_paterno }}</td>
      <td>{{ p.a_materno }}</td>
      <td>{{ p.rut }}</td>
      <td>{{ p.email }}</td>
      <td>
        <a href="#" onclick="EliminarPedido({{ p.id }})" button type="button" class="btn btn-danger">Eliminar</button>
        &nbsp;
        <a href="{% url 'ModificarPedidos' p.id %}" button type="button" class="btn btn-primary">Modificar</button>
      </td>
    </tr>
    {% endfor %}
  </tbody>
      </table>
      <hr>
      <div>
        {% include 'WebApp/paginator.html' %}
      </div>
   </div>
</div>


{% endblock %}
